; =============================================================================
; Asterisk PJSIP Configuration for Linphone.org SIP Account
; Account: youngho@sip.linphone.org
; Target: AWS EC2 with NAT
; =============================================================================

[global]
type=global
debug=yes

; =============================================================================
; Transport - UDP with NAT settings for AWS EC2
; =============================================================================
[transport-udp]
type=transport
protocol=udp
bind=0.0.0.0:5060
external_media_address=3.36.250.255
external_signaling_address=3.36.250.255
local_net=172.31.0.0/16

; =============================================================================
; Linphone.org Registration
; =============================================================================
[linphone]
type=registration
transport=transport-udp
outbound_auth=linphone-auth
server_uri=sip:sip.linphone.org
client_uri=sip:youngho@sip.linphone.org
retry_interval=60
expiration=3600

[linphone-auth]
type=auth
auth_type=userpass
username=youngho
password=Dudgh12!

[linphone-aor]
type=aor
contact=sip:youngho@sip.linphone.org

[linphone-endpoint]
type=endpoint
transport=transport-udp
context=from-linphone
disallow=all
allow=ulaw
allow=alaw
outbound_auth=linphone-auth
aors=linphone-aor
from_user=youngho
from_domain=sip.linphone.org
direct_media=no
rtp_symmetric=yes
force_rport=yes
rewrite_contact=yes

[linphone-identify]
type=identify
endpoint=linphone-endpoint
match=sip.linphone.org

; =============================================================================
; Local SIP Clients: agent01 - agent06
; Using same name for endpoint/auth/aor (type= distinguishes them)
; =============================================================================

; --- Agent 01 ---
[agent01]
type=endpoint
context=from-internal
disallow=all
allow=ulaw
allow=alaw
auth=agent01
aors=agent01
direct_media=no
rtp_symmetric=yes
force_rport=yes
rewrite_contact=yes

[agent01]
type=auth
auth_type=userpass
username=agent01
password=Aivle12!

[agent01]
type=aor
max_contacts=1
remove_existing=yes

; --- Agent 02 ---
[agent02]
type=endpoint
context=from-internal
disallow=all
allow=ulaw
allow=alaw
auth=agent02
aors=agent02
direct_media=no
rtp_symmetric=yes
force_rport=yes
rewrite_contact=yes

[agent02]
type=auth
auth_type=userpass
username=agent02
password=Aivle12!

[agent02]
type=aor
max_contacts=1
remove_existing=yes

; --- Agent 03 ---
[agent03]
type=endpoint
context=from-internal
disallow=all
allow=ulaw
allow=alaw
auth=agent03
aors=agent03
direct_media=no
rtp_symmetric=yes
force_rport=yes
rewrite_contact=yes

[agent03]
type=auth
auth_type=userpass
username=agent03
password=Aivle12!

[agent03]
type=aor
max_contacts=1
remove_existing=yes

; --- Agent 04 ---
[agent04]
type=endpoint
context=from-internal
disallow=all
allow=ulaw
allow=alaw
auth=agent04
aors=agent04
direct_media=no
rtp_symmetric=yes
force_rport=yes
rewrite_contact=yes

[agent04]
type=auth
auth_type=userpass
username=agent04
password=Aivle12!

[agent04]
type=aor
max_contacts=1
remove_existing=yes

; --- Agent 05 ---
[agent05]
type=endpoint
context=from-internal
disallow=all
allow=ulaw
allow=alaw
auth=agent05
aors=agent05
direct_media=no
rtp_symmetric=yes
force_rport=yes
rewrite_contact=yes

[agent05]
type=auth
auth_type=userpass
username=agent05
password=Aivle12!

[agent05]
type=aor
max_contacts=1
remove_existing=yes

; --- Agent 06 ---
[agent06]
type=endpoint
context=from-internal
disallow=all
allow=ulaw
allow=alaw
auth=agent06
aors=agent06
direct_media=no
rtp_symmetric=yes
force_rport=yes
rewrite_contact=yes

[agent06]
type=auth
auth_type=userpass
username=agent06
password=Aivle12!

[agent06]
type=aor
max_contacts=1
remove_existing=yes
